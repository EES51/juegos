<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verdad o Reto COLEGIO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {font-family:'Inter',sans-serif;background:linear-gradient(135deg,#4F46E5,#A855F7);min-height:100vh;}
        .card {background:#fff;box-shadow:0 15px 30px -5px rgba(0,0,0,.2);transition:.3s;}
        .card:hover {transform:translateY(-4px);}
        #truth-btn {background:#10B981;border-radius:1.5rem;padding:1rem 2rem;}
        #truth-btn:hover {background:#059669;}
        #dare-btn {background:#EF4444;border-radius:1.5rem;padding:1rem 2rem;}
        #dare-btn:hover {background:#DC2626;}
        #current-player-section {background:#DBEAFE;border:3px solid #3B82F6;border-radius:1.5rem;}
        #current-player-display {color:#1E40AF;}
        #next-player-btn {background:#3B82F6;border-radius:9999px;padding:0.75rem 1.5rem;}
        #next-player-btn:hover {background:#2563EB;}
        #action-box {background:#1F2937;border:4px dashed #3B82F6;border-radius:2rem;position:relative;overflow:hidden;}
        #action-display {min-height:12rem;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;padding:2rem;text-align:left;font-size:1.5rem;font-weight:800;line-height:1.6;color:#34D399;}
        .action-title {font-size:2.5rem;font-weight:900;margin-bottom:0.5rem;}
        .neon-truth {color:#34D399;text-shadow:0 0 7px #10B981,0 0 10px #10B981,0 0 21px #059669,0 0 42px #047857;}
        .neon-dare {color:#F87171;text-shadow:0 0 7px #EF4444,0 0 10px #EF4444,0 0 21px #DC2626,0 0 42px #B91C1C;}
        @keyframes fadeInScale {0%{opacity:0;transform:scale(.9)}100%{opacity:1;transform:scale(1)}}
        .animate-in {animation:fadeInScale .5s ease-out;}
        .player-tag {padding:0.5rem 1rem;border-radius:9999px;font-weight:600;margin:0.25rem;transition:all .3s;display:inline-flex;align-items:center;}
        .tag-girl {background:#F9A8D4;color:#86198F;border:2px solid #D946EF;box-shadow:0 0 6px rgba(244,114,182,.7);}
        .tag-girl:hover {background:#D946EF;color:#fff;transform:scale(1.05);}
        .tag-boy {background:#22D3EE;color:#083344;border:2px solid #06B6D4;box-shadow:0 0 10px #67E8F9;}
        .tag-boy:hover {background:#06B6D4;color:#fff;transform:scale(1.05);}
        .current-player {background:#10B981!important;color:#fff!important;animation:pulse 1.5s infinite;}
        @keyframes pulse {0%,100%{box-shadow:0 0 0 0 rgba(16,185,129,.7)}50%{box-shadow:0 0 0 10px rgba(16,185,129,0)}}
        .radio-group {display:flex;gap:1rem;justify-content:center;margin:1rem 0;}
        .radio-item {display:flex;align-items:center;gap:0.5rem;}
        .player-name {font-weight:900;color:#1E40AF;}
        .target-name {font-weight:900;color:#EA580C;}
        #category {border-radius:1rem;padding:1rem;font-weight:bold;}
        .select-wrapper {position:relative;}
        .select-wrapper::after {
            content:'â–¼';position:absolute;right:1rem;top:50%;transform:translateY(-50%);pointer-events:none;color:#6B7280;
        }
        .btn-emoji {font-size:1.5rem;margin-left:0.5rem;}
    </style>
</head>
<body class="p-4 flex items-center justify-center">

<div id="start-screen" class="w-full max-w-xl rounded-xl p-8 card">
    <h1 class="text-5xl font-extrabold text-center mb-6">Â¡COLEGIO MODE!</h1>

    <div class="mb-6">
        <p class="text-xl font-bold mb-3 text-center">Â¿Con quiÃ©n querÃ©s jugar?</p>
        <div class="radio-group">
            <label class="radio-item">
                <input type="radio" name="global-gender-mode" value="both" checked>
                <span class="font-medium">Ambos</span>
            </label>
            <label class="radio-item">
                <input type="radio" name="global-gender-mode" value="girls">
                <span class="font-medium">Solo chicas</span>
            </label>
            <label class="radio-item">
                <input type="radio" name="global-gender-mode" value="boys">
                <span class="font-medium">Solo chicos</span>
            </label>
        </div>
    </div>

    <div id="both-mode">
        <label class="block text-xl font-bold mb-2">Chicas:</label>
        <textarea id="girls-input" rows="2" class="w-full p-4 border-2 border-purple-500 rounded-lg mb-4" placeholder="Ana, SofÃ­a, LucÃ­a"></textarea>
        <label class="block text-xl font-bold mb-2">Chicos:</label>
        <textarea id="boys-input" rows="2" class="w-full p-4 border-2 border-purple-500 rounded-lg mb-6" placeholder="Juan, Pedro, Marcos"></textarea>
    </div>

    <div id="girls-mode" class="hidden">
        <label class="block text-xl font-bold mb-2">Chicas:</label>
        <textarea id="girls-only-input" rows="3" class="w-full p-4 border-2 border-pink-500 rounded-lg mb-6" placeholder="Ana, SofÃ­a, LucÃ­a, Camila"></textarea>
    </div>

    <div id="boys-mode" class="hidden">
        <label class="block text-xl font-bold mb-2">Chicos:</label>
        <textarea id="boys-only-input" rows="3" class="w-full p-4 border-2 border-blue-500 rounded-lg mb-6" placeholder="Juan, Pedro, Marcos, Lucas"></textarea>
    </div>

    <button onclick="startGame()" class="w-full py-4 rounded-xl text-2xl font-bold bg-purple-600 hover:bg-purple-700 text-white">Â¡EMPEZAR!</button>
    <p id="error-message" class="text-red-500 text-center mt-4 hidden">MÃ­nimo 2 jugadores</p>
</div>

<!-- PANTALLA DE PREFERENCIA -->
<div id="preference-screen" class="w-full max-w-xl rounded-xl p-8 card hidden">
    <h2 class="text-4xl font-extrabold text-center mb-6" id="preference-title">Preferencia de <span id="current-preference-player"></span></h2>
    <p class="text-center mb-6">Â¿Con quiÃ©n querÃ©s que te toque reto o verdad?</p>
    <div class="radio-group">
        <label class="radio-item">
            <input type="radio" name="player-preference" value="both" checked>
            <span class="font-medium">Ambos</span>
        </label>
        <label class="radio-item">
            <input type="radio" name="player-preference" value="girls">
            <span class="font-medium">Solo chicas</span>
        </label>
        <label class="radio-item">
            <input type="radio" name="player-preference" value="boys">
            <span class="font-medium">Solo chicos</span>
        </label>
    </div>
    <button onclick="savePreferenceAndNext()" class="w-full py-4 mt-6 rounded-xl text-2xl font-bold bg-green-600 hover:bg-green-700 text-white">SIGUIENTE â†’</button>
</div>

<div id="game-screen" class="w-full max-w-3xl rounded-xl p-8 card hidden">
    <h1 class="text-5xl font-extrabold text-center mb-6">Verdad o Reto</h1>

    <div id="current-player-section" class="p-6 text-center mb-6">
        <p class="text-lg font-bold text-blue-700">TURNO DE:</p>
        <div id="current-player-display" class="text-4xl font-black my-4">â€”</div>
        <button onclick="nextPlayer()" id="next-player-btn" class="text-white font-bold">Girar Ruleta</button>
    </div>

    <div class="text-center mb-6">
        <p class="font-bold">Jugadores:</p>
        <div id="player-list-tags" class="flex flex-wrap justify-center"></div>
    </div>

    <div class="bg-gray-100 p-4 rounded-xl mb-8">
        <div class="select-wrapper">
            <select id="category" class="w-full p-4 rounded-lg text-xl font-bold appearance-none bg-transparent">
                <option value="friends">COLEGIO</option>
                <option value="family">FAMILIA</option>
            </select>
        </div>
    </div>

    <div id="action-box" class="p-8 rounded-3xl mb-8">
        <div id="action-display" class="text-white">
            <div class="action-title neon-truth">VERDAD (COLEGIO)</div>
            <div>Â¡Gira la ruleta primero!</div>
        </div>
    </div>

    <div class="grid grid-cols-2 gap-4">
        <button id="truth-btn" onclick="askAction('truth')" class="text-2xl font-bold flex items-center justify-center">
            VERDAD <span class="btn-emoji">ðŸ˜³</span>
        </button>
        <button id="dare-btn" onclick="askAction('dare')" class="text-2xl font-bold flex items-center justify-center">
            RETO <span class="btn-emoji">ðŸ˜ˆ</span>
        </button>
    </div>
</div>

<script>
    let players = [], currentPlayerIndex = -1, isSpinning = false;
    let currentPreferenceIndex = 0;

    const gameData = {
        friends: { truth: [], dare: [] },
        family:  { truth: [], dare: [] }
    };

    // === VERDADES COLEGIO (TODAS CON [PLAYER] y [TARGET] DENTRO) ===
    gameData.friends.truth = `[PLAYER], Â¿alguna vez pensaste en besarme en clase?
[PLAYER], Â¿quÃ© parte de [TARGET] cuerpo mirÃ¡s mÃ¡s sin que me dÃ© cuenta?
[PLAYER], Â¿te pusiste caliente alguna vez por un mensaje de [TARGET]?
[PLAYER], Â¿quiÃ©n del curso te parece mÃ¡s sexy con uniforme?
[PLAYER], Â¿alguna vez te imaginaste desnudo/a en el baÃ±o del colegio?
[PLAYER], Â¿quÃ© harÃ­as si  estuviÃ©ras solo/a en el aula despuÃ©s de clases con [TARGET]?
[PLAYER], Â¿te excita que [TARGET] te susurre al oÃ­do en pÃºblico?
[PLAYER], Â¿alguna vez te masturbaste pensando en alguien del colegio?
[PLAYER], Â¿quÃ© prenda de [TARGET] te pondrÃ­as si pudieras?
[PLAYER], Â¿te gusta que [TARGET] te toque el pelo en clase?
[PLAYER], Â¿alguna vez mandaste un audio subido de tono a alguien del curso?
[PLAYER], Â¿quÃ© olor de [TARGET] te vuelve loco/a?
[PLAYER], Â¿te excita ver a [TARGET] morderse el labio en clase?
[PLAYER], Â¿alguna vez soÃ±aste con [TARGET] en situaciÃ³n hot?
[PLAYER], Â¿quÃ© parte de tu cuerpo te gusta que te besen?
[PLAYER], Â¿te pondrÃ­as celoso/a si vieras a [TARGET] coqueteando con otro/a?
[PLAYER], Â¿alguna vez te calentaste con una foto de alguien del colegio?
[PLAYER], Â¿quÃ© palabra sexy te gustarÃ­a que [TARGET] te diga al oÃ­do?
[PLAYER], Â¿te excita el roce â€œaccidentalâ€ en el pupitre con [TARGET]?
[PLAYER], Â¿alguna vez escribiste el nombre de [TARGET] en un lugar secreto?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te mandara una foto sugerente en recreo?
[PLAYER], Â¿te gusta que [TARGET] te mire fijo a los ojos en silencio?
[PLAYER], Â¿alguna vez te imaginaste besando a [TARGET] en el pasillo?
[PLAYER], Â¿quÃ© prenda interior usÃ¡s hoy? (color o tipo)
[PLAYER], Â¿te excita que [TARGET] te hable bajito cerca del cuello?
[PLAYER], Â¿alguna vez te calentaste con el roce de rodillas bajo el pupitre con [TARGET]?
[PLAYER], Â¿quÃ© parte de [TARGET] te gustarÃ­a tocar disimuladamente?
[PLAYER], Â¿te gusta que [TARGET] te abrace por detrÃ¡s â€œde sorpresaâ€?
[PLAYER], Â¿alguna vez pensaste en [TARGET] mientras te duchabas?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te susurrara â€œte deseoâ€ en la fila del kiosco?
[PLAYER], Â¿te excita ver a [TARGET] lamerse los labios?
[PLAYER], Â¿alguna vez guardaste una nota de [TARGET] con doble sentido?
[PLAYER], Â¿quÃ© zona tuya es la mÃ¡s sensible al roce?
[PLAYER], Â¿te gusta que [TARGET] te mire mientras escribÃ­s en el pizarrÃ³n?
[PLAYER], Â¿alguna vez te imaginaste con [TARGET] en el baÃ±o?
[PLAYER], Â¿quÃ© mensaje hot le mandarÃ­as a [TARGET] si nadie viera?
[PLAYER], Â¿te excita el olor a perfume de [TARGET] despuÃ©s de educaciÃ³n fÃ­sica?
[PLAYER], Â¿alguna vez te pusiste nervioso/a por un roce â€œsin quererâ€ con [TARGET]?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te dijera â€œte como a besosâ€ en voz baja?
[PLAYER], Â¿te gusta que [TARGET] te toque la mano al pasar cuadernos?
[PLAYER], Â¿alguna vez soÃ±aste con [TARGET] en ropa interior?
[PLAYER], Â¿quÃ© parte del uniforme de [TARGET] te parece mÃ¡s sexy?
[PLAYER], Â¿te excita que [TARGET] te hable cerca de la oreja?
[PLAYER], Â¿alguna vez pensaste en [TARGET] durante un examen?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te mandara un audio gimiendo tu nombre?
[PLAYER], Â¿te gusta que [TARGET] te mire fijo mientras hablÃ¡s?
[PLAYER], Â¿alguna vez te calentaste con una sonrisa de [TARGET]?
[PLAYER], Â¿quÃ© prenda de [TARGET] te gustarÃ­a oler en secreto?
[PLAYER], Â¿te excita el roce de piernas al sentarte al lado de [TARGET]?
[PLAYER], Â¿alguna vez escribiste algo hot sobre [TARGET] en tu celular?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te rozara la espalda â€œaccidentalmenteâ€?
[PLAYER], Â¿te gusta que [TARGET] te susurre piropos en la biblioteca?
[PLAYER], Â¿alguna vez te imaginaste besando a [TARGET] en el micro?
[PLAYER], Â¿quÃ© zona tuya te gusta que [TARGET] te acaricie disimuladamente?
[PLAYER], Â¿te excita ver a [TARGET] jugar con su pelo en clase?
[PLAYER], Â¿alguna vez guardaste una foto de [TARGET] con filtro hot?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te dijera â€œme ponÃ©s calienteâ€ en recreo?
[PLAYER], Â¿te gusta que [TARGET] te toque el brazo al reÃ­rse?
[PLAYER], Â¿alguna vez pensaste en [TARGET] mientras escuchabas mÃºsica?
[PLAYER], Â¿quÃ© mensaje sugerente le escribirÃ­as a [TARGET] en una nota?
[PLAYER], Â¿te excita el roce de hombros en la foto grupal con [TARGET]?
[PLAYER], Â¿alguna vez soÃ±aste con [TARGET] en el vestuario?
[PLAYER], Â¿quÃ© parte de [TARGET] te gustarÃ­a besar en secreto?
[PLAYER], Â¿te gusta que [TARGET] te mire mientras comÃ©s algo?
[PLAYER], Â¿alguna vez te calentaste con la voz grabada de [TARGET]?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te mandara una foto de su cuello?
[PLAYER], Â¿te excita que [TARGET] te hable despacio y cerca?
[PLAYER], Â¿alguna vez pensaste en [TARGET] durante el himno?
[PLAYER], Â¿quÃ© prenda tuya te gustarÃ­a que [TARGET] usara?
[PLAYER], Â¿te gusta que [TARGET] te roce al pasar en el pasillo?
[PLAYER], Â¿alguna vez imaginaste las manos de [TARGET] en tu cintura?
[PLAYER], Â¿quÃ© audio hot le mandarÃ­as a [TARGET] desde el baÃ±o?
[PLAYER], Â¿te excita ver a [TARGET] morder un lÃ¡piz?
[PLAYER], Â¿alguna vez guardaste un mensaje de [TARGET] con doble sentido?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te susurrara â€œte quiero desnudo/aâ€?
[PLAYER], Â¿te gusta que [TARGET] te toque la nuca â€œquitando una pelusaâ€?
[PLAYER], Â¿alguna vez pensaste en [TARGET] en la sala de mÃºsica?
[PLAYER], Â¿quÃ© zona tuya te vuelve loco/a con un beso suave de [TARGET]?
[PLAYER], Â¿te excita el roce de dedos al compartir el celular con [TARGET]?
[PLAYER], Â¿alguna vez soÃ±aste con [TARGET] en el patio?
[PLAYER], Â¿quÃ© nota hot le pasarÃ­as a [TARGET] en clase?
[PLAYER], Â¿te gusta que [TARGET] te mire fijo al saludar?
[PLAYER], Â¿alguna vez te calentaste con la risa de [TARGET]?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te dijera â€œme mojo/pienso en vosâ€?
[PLAYER], Â¿te excita que [TARGET] te hable al oÃ­do en la fila?
[PLAYER], Â¿alguna vez imaginaste besarte con [TARGET] en el ascensor?
[PLAYER], Â¿quÃ© parte de [TARGET] te gustarÃ­a oler despuÃ©s de clases?
[PLAYER], Â¿te gusta que [TARGET] te abrace â€œde amigosâ€ pero apretado?
[PLAYER], Â¿alguna vez pensaste en [TARGET] mientras escribÃ­as?
[PLAYER], Â¿quÃ© mensaje sugerente le mandarÃ­as a [TARGET] por WhatsApp?
[PLAYER], Â¿te excita el roce de rodillas en el banco con [TARGET]?
[PLAYER], Â¿alguna vez soÃ±aste con [TARGET] en la biblioteca?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te rozara la mano â€œsin quererâ€?
[PLAYER], Â¿te gusta que [TARGET] te susurre al despedirse?
[PLAYER], Â¿alguna vez guardaste una foto de [TARGET] en secreto?
[PLAYER], Â¿quÃ© audio caliente le mandarÃ­as a [TARGET] en recreo?
[PLAYER], Â¿te excita ver a [TARGET] lamerse el dedo?
[PLAYER], Â¿alguna vez pensaste en [TARGET] durante educaciÃ³n fÃ­sica?
[PLAYER], Â¿quÃ© harÃ­as si [TARGET] te dijera â€œte deseo ahoraâ€?
[PLAYER], Â¿quÃ© reto de los 100 de nivel 1 harÃ­as con [TARGET] hoy mismo?`.trim().split('\n');

    // === RETOS COLEGIO (CON [TARGET]) ===
    gameData.friends.dare = `Mirarse fijo 20 segundos sin pestaÃ±ear con [TARGET]; quien pierda recibe un guiÃ±o lento.
Escribir â€œme gustÃ¡sâ€ en una hoja y pasarla doblada a [TARGET] en clase.
Soplar suave en la nuca de [TARGET] al pasar por detrÃ¡s.
Roce de dedos â€œaccidentalâ€ al entregar un lÃ¡piz a [TARGET].
Susurrar un piropo a [TARGET] cuando el profe da la espalda.
Intercambiar chicles mascados con [TARGET] (sin contacto boca a boca).
Dibujar una carita sonriente en la mano de [TARGET] con lapicera.
Mandar audio de 3 segundos respirando profundo a [TARGET] por WhatsApp.
Rozar rodillas bajo el pupitre con [TARGET] 5 segundos.
Mostrar rÃ¡pido el celular con â€œpensando en vosâ€ a [TARGET].
Oler el perfume de [TARGET] â€œcomo si fuera una florâ€.
Jugar piedra-papel-tijera con [TARGET]: perdedor besa la mejilla.
Pasar nota a [TARGET] que diga â€œtocame el brazo disimuladamenteâ€.
Mirar los labios de [TARGET] mientras habla en grupo.
Intercambiar gorras/mochilas con [TARGET] por 3 minutos.
Susurrar â€œme ponÃ©s nervioso/aâ€ a [TARGET] en la fila del kiosco.
Hacer un guiÃ±o con lengua tocando el diente a [TARGET].
Rozar la espalda de [TARGET] al pasar en pasillo estrecho.
Mandar foto de tu sonrisa mordiendo el labio a [TARGET].
Decir â€œsi no hubiera genteâ€¦â€ a [TARGET] y callarte sonriendo.
Beso en la mejilla de [TARGET] que roza la comisura 1 segundo.
Tocar el antebrazo de [TARGET] 5 segundos â€œmirando el relojâ€.
Escribir â€œsin ropa serÃ­asâ€¦â€ en hoja y mostrarla a [TARGET] riendo.
Lamer el dedo despuÃ©s de tocar la goma de [TARGET].
Verdad o reto rÃ¡pido en el baÃ±o con [TARGET] (solo besos en mano).
Abrazo â€œde amigosâ€ a [TARGET] que dura 4 segundos de mÃ¡s.
Audio jadeando bajito con â€œesto me hacÃ©sâ€ a [TARGET].
Rozar codo con codo con [TARGET] en la biblioteca.
Intercambiar pulseras/reloj con [TARGET] por el resto del dÃ­a.
Escribir en el vidrio empaÃ±ado â€œbeso pendienteâ€ frente a [TARGET].
Peinar el cabello de [TARGET] con los dedos 10 segundos.
Beso en la frente a [TARGET] â€œpor buena suerte en el examenâ€.
Foto de escote/cuello desde el baÃ±o (solo sugerente) a [TARGET].
Mirarse fijo y contar hasta 10 sin hablar con [TARGET].
Susurrar â€œte comerÃ­a a besosâ€ a [TARGET] al saludar.
Rozar hombros con [TARGET] en la foto grupal.
Escribir en el pupitre â€œtoco maderaâ€¦ contigoâ€ al lado de [TARGET].
Beso en la mano de [TARGET] como â€œcaballero medievalâ€.
Audio susurrando â€œme imaginÃ¡s sin ropa?â€ a [TARGET].
Tocar la cintura de [TARGET] 3 segundos al ayudar con la mochila.
Beso volado que â€œcasiâ€ llega a la mejilla de [TARGET].
Rozar muslo con muslo con [TARGET] al sentarse en banco corrido.
Nota a [TARGET] que diga â€œte debo un abrazo apretadoâ€.
Lamer el lÃ¡piz mirÃ¡ndolo a los ojos de [TARGET].
Jugar a â€œquiÃ©n aguanta mÃ¡s sin sonreÃ­râ€ tocando manos con [TARGET].
Abrazo lateral a [TARGET] en la fila de la bandera.
Audio diciendo â€œtu voz me calientaâ€ a [TARGET].
Rozar dedos con [TARGET] al compartir el celular.
Intercambiar auriculares y escuchar la misma canciÃ³n con [TARGET].
Escribir â€œcalienteâ€ en la calculadora y mostrarla a [TARGET].
Tocar el lÃ³bulo de la oreja de [TARGET] â€œquitando una pelusaâ€.
Beso en la sien a [TARGET] â€œpor el cumpleaÃ±os atrasadoâ€.
Foto de pies rozÃ¡ndose bajo el pupitre con [TARGET].
Mirarse y morderse el labio al mismo tiempo con [TARGET].
Susurrar â€œme encanta tu olorâ€ a [TARGET] al despedirse.
Rozar espaldas con [TARGET] al sentarse en el micro.
Escribir â€œbeso robadoâ€ en la palma de [TARGET] y cerrarla.
Beso en el dorso de la mano de [TARGET] con lengua apenas.
Audio gimiendo el nombre de [TARGET] bajito.
Tocar rodilla de [TARGET] 2 segundos al cruzar piernas.
Beso en la mejilla de [TARGET] que deja marca de gloss.
Rozar cabello de [TARGET] al â€œarreglar un mechÃ³nâ€.
Nota a [TARGET] â€œte miro y me derritoâ€.
Lamer el borde del vaso mirÃ¡ndolo fijo a [TARGET].
Jugar a â€œadivina el saborâ€ de un caramelo en la boca con [TARGET].
Abrazo por detrÃ¡s â€œsorpresaâ€ a [TARGET] de 3 segundos.
Audio respirando cerca del micrÃ³fono a [TARGET].
Rozar dedos con [TARGET] al pasar el corrector.
Intercambiar llaveros â€œhasta maÃ±anaâ€ con [TARGET].
Escribir â€œcalorâ€ en el brazo de [TARGET] con dedo.
Tocar nuca de [TARGET] â€œquitando etiqueta de ropaâ€.
Beso en la muÃ±eca de [TARGET] â€œcomo prÃ­ncipeâ€.
Foto de labios hÃºmedos (sin mostrar dientes) a [TARGET].
Mirarse y dibujar corazÃ³n en el aire con [TARGET].
Susurrar â€œquiero oler tu cuello otra vezâ€ a [TARGET].
Rozar piernas con [TARGET] al sentarse en el piso.
Escribir â€œtuyo/aâ€ en la goma y dÃ¡rsela a [TARGET].
Beso en el aire que â€œaterrizaâ€ en la mejilla de [TARGET].
Audio susurrando â€œme mojÃ¡s/pone duroâ€ a [TARGET].
Tocar codo de [TARGET] al reÃ­rse de un chiste.
Beso en la punta de la nariz a [TARGET] â€œpor lindo/aâ€.
Rozar manos con [TARGET] al compartir el mate (si usan).
Nota a [TARGET] â€œte robo un beso mentalâ€.
Lamer el dedo despuÃ©s de escribir con tinta frente a [TARGET].
Jugar a â€œquiÃ©n parpadea primeroâ€ tocando mejillas con [TARGET].
Abrazo â€œde osoâ€ que aprieta 5 segundos a [TARGET].
Audio diciendo â€œtus ojos me desnudanâ€ a [TARGET].
Rozar dedos con [TARGET] al pasar el cuaderno.
Intercambiar paÃ±uelos â€œhasta el lunesâ€ con [TARGET].
Escribir â€œfuegoâ€ en la mesa con agua frente a [TARGET].
Tocar hombro de [TARGET] â€œsacudiendo una motaâ€.
Beso en la palma de [TARGET] â€œguardado para despuÃ©sâ€.
Foto de cuello con mordisco de lapicera a [TARGET].
Mirarse y soplar beso al mismo tiempo con [TARGET].
Susurrar â€œme encanta cuando te sonrojÃ¡sâ€ a [TARGET].
Rozar espinilla de [TARGET] al â€œlimpiar una miguitaâ€.
Escribir â€œcalienteâ€ en el celular y mostrarlo a [TARGET].
Beso en el aire que â€œrozaâ€ la oreja de [TARGET].
Audio gimiendo â€œuy, casiâ€ a [TARGET].
Reto final: mirarse 30 segundos con [TARGET], sonreÃ­r y decir â€œesto reciÃ©n empiezaâ€.`.trim().split('\n');

    // === FAMILIA ===
    gameData.family.truth = `Â¿QuÃ© travesura de niÃ±o nunca confesaste, [PLAYER_NAME]?
Â¿QuiÃ©n es el familiar mÃ¡s gracioso? Â¿Por quÃ©?
Â¿QuÃ© comida familiar odias en secreto?
Â¿CuÃ¡l es tu recuerdo favorito con abuelos?
Â¿QuÃ© primo/a te cae mejor? Â¿Por quÃ©?
Â¿Has roto algo caro y lo escondiste? Â¡Confiesa!
Â¿QuiÃ©n te da los mejores regalos?
Â¿QuÃ© tradiciÃ³n familiar cambiarÃ­as?
Â¿QuiÃ©n es el mÃ¡s dormilÃ³n de la familia?
Â¿QuÃ© apodo familiar odias?
Â¿Has copiado en un examen familiar?
Â¿QuiÃ©n cocina mejor? Â¡Nombres!
Â¿QuÃ© familiar te ha salvado de un lÃ­o?
Â¿CuÃ¡l es tu foto familiar mÃ¡s vergonzosa?
Â¿QuiÃ©n es el rey/reina del karaoke?
Â¿Has mentido sobre tu edad en familia?
Â¿QuÃ© familiar admiras en secreto?
Â¿QuiÃ©n es el mÃ¡s tacaÃ±o?
Â¿QuÃ© viaje familiar fue el mejor?
Â¿Has robado dulces de la despensa?
Â¿QuiÃ©n te enseÃ±Ã³ a andar en bici?
Â¿QuÃ© primo/a te hacÃ­a bullying de pequeÃ±o?
Â¿QuiÃ©n es el mÃ¡s deportista?
Â¿Has fingido estar enfermo para no ir a un evento?
Â¿QuÃ© familiar te hace reÃ­r con solo mirarlo?
Â¿QuiÃ©n tiene el coche mÃ¡s loco?
Â¿QuÃ© tradiciÃ³n navideÃ±a es tu favorita?
Â¿Has perdido algo importante de un familiar?
Â¿QuiÃ©n es el mÃ¡s fiestero?
Â¿QuÃ© familiar te da los mejores consejos amorosos?
Â¿Has roto un rÃ©cord familiar (carrera, juegoâ€¦)?
Â¿QuiÃ©n es el mÃ¡s organizado?
Â¿QuÃ© familiar huele mejor?
Â¿Has imitado a un familiar a sus espaldas?
Â¿QuiÃ©n es el mÃ¡s tecnolÃ³gico?
Â¿QuÃ© familiar te ha prestado mÃ¡s dinero?
Â¿Has ganado alguna apuesta familiar?
Â¿QuiÃ©n es el mÃ¡s madrugador?
Â¿QuÃ© familiar baila peor?
Â¿Has escondido un novio/a de la familia?
Â¿QuiÃ©n es el mÃ¡s generoso?
Â¿QuÃ© familiar te ha llevado al mÃ©dico mÃ¡s veces?
Â¿Has hecho una broma pesada a un primo?
Â¿QuiÃ©n es el mÃ¡s cinÃ©filo?
Â¿QuÃ© familiar tiene la risa mÃ¡s contagiosa?
Â¿Has ganado un juego de mesa familiar haciendo trampas?
Â¿QuiÃ©n es el mÃ¡s viajero?
Â¿QuÃ© familiar te ha enseÃ±ado un hobby?
Â¿Has perdido el mÃ³vil en una reuniÃ³n familiar?
Â¿QuiÃ©n es el mÃ¡s fashion?
Â¿QuÃ© familiar te ha defendido en una pelea?
Â¿Has cantado en una boda familiar?
Â¿QuiÃ©n es el mÃ¡s ecolÃ³gico?
Â¿QuÃ© familiar te ha regalado calcetines 3 Navidades seguidas?
Â¿Has hecho un castillo de arena Ã©pico con primos?
Â¿QuiÃ©n es el mÃ¡s fan de un equipo?
Â¿QuÃ© familiar te ha pillado en una mentira?
Â¿Has ganado un concurso familiar?
Â¿QuiÃ©n es el mÃ¡s dormilÃ³n en viajes?
Â¿QuÃ© familiar hace los mejores postres?
Â¿Has hecho una fogata familiar Ã©pica?
Â¿QuiÃ©n es el mÃ¡s bromista?
Â¿QuÃ© familiar te ha enseÃ±ado a cocinar?
Â¿Has roto un juguete de un primo y lo culpado?
Â¿QuiÃ©n es el mÃ¡s lector?
Â¿QuÃ© familiar te ha llevado a tu primer concierto?
Â¿Has ganado un juego de cartas familiar?
Â¿QuiÃ©n es el mÃ¡s fotogÃ©nico?
Â¿QuÃ© familiar te ha prestado ropa?
Â¿Has hecho una guerra de agua legendaria?
Â¿QuiÃ©n es el mÃ¡s melÃ³mano?
Â¿QuÃ© familiar te ha ayudado con los deberes?
Â¿Has perdido una apuesta y pagado cena?
Â¿QuiÃ©n es el mÃ¡s cinÃ©filo de terror?
Â¿QuÃ© familiar te ha enseÃ±ado a nadar?
Â¿Has hecho un disfraz familiar casero?
Â¿QuiÃ©n es el mÃ¡s deportista extremo?
Â¿QuÃ© familiar te ha regalado el mejor libro?
Â¿Has ganado un torneo de videojuegos familiar?
Â¿QuiÃ©n es el mÃ¡s fan de Disney?
Â¿QuÃ© familiar te ha llevado a un parque de atracciones?
Â¿Has hecho una acampada familiar?
Â¿QuiÃ©n es el mÃ¡s cocinillas sano?
Â¿QuÃ© familiar te ha enseÃ±ado a conducir?
Â¿Has ganado un trivial familiar?
Â¿QuiÃ©n es el mÃ¡s fan de los animales?
Â¿QuÃ© familiar te ha regalado tu mascota?
Â¿Has hecho un pÃ­cnic familiar Ã©pico?
Â¿QuiÃ©n es el mÃ¡s fan de los musicales?
Â¿QuÃ© familiar te ha ayudado a mudarte?
Â¿Has ganado un concurso de baile familiar?
Â¿QuiÃ©n es el mÃ¡s fan de los podcasts?
Â¿QuÃ© familiar te ha enseÃ±ado un idioma?
Â¿Has hecho una barbacoa legendaria?
Â¿QuiÃ©n es el mÃ¡s fan de los memes?
Â¿QuÃ© familiar te ha llevado a un museo?
Â¿Has ganado un karaoke familiar?
Â¿QuiÃ©n es el mÃ¡s fan de los videojuegos retro?
Â¿QuÃ© familiar te ha enseÃ±ado a ahorrar?
Â¿CuÃ¡l es la anÃ©cdota familiar que mÃ¡s repites?`.trim().split('\n');

    gameData.family.dare = `Abrazo de oso a todos 10 seg
Canta el himno familiar inventado
Imita a tu abuela cocinando 20 seg
Haz 10 sentadillas con un primo encima
Cuenta un chiste de papÃ¡ al grupo
Baila la macarena con tu tÃ­o imaginario
Llama a un familiar y di â€œte quieroâ€ cantando
Haz una torre de 5 personas (o cojines)
Imita el ronquido de tu padre
EnvÃ­a un meme familiar al chat
Haz 20 saltos de estrella
Cuenta una historia familiar exagerada 30 seg
Baila zumba con tu primo/a 20 seg
Haz un sandwich humano con 3 personas
Imita a tu madre regaÃ±ando
EnvÃ­a una foto tuya haciendo morritos al grupo
Haz 10 flexiones con aplausos
Canta â€œCumpleaÃ±os felizâ€ a un primo
Imita a tu abuelo contando un chiste
Haz un castillo de cartas (o mÃ³viles)
Baila el flossing 15 seg
Llama a tu tÃ­a y dile un cumplido exagerado
Haz 15 abdominales cantando
Imita a tu primo pequeÃ±o llorando
EnvÃ­a un audio imitando a tu madre al grupo
Haz un pino (o intento) 10 seg
Cuenta los primos que tienes en voz alta
Baila vals con una escoba 20 seg
Imita a tu tÃ­o bailando salsa
Haz 10 burpees gritando â€œÂ¡Familia!â€
EnvÃ­a un sticker de amor a un familiar
Canta una canciÃ³n infantil a todo pulmÃ³n
Imita a tu perro ladrando
Haz una pirÃ¡mide humana de 3
Baila el robot 20 seg
Llama a tu padre y hazle reÃ­r en 10 seg
Haz 20 saltos de tijera
Imita a tu abuela regaÃ±ando por la tele
EnvÃ­a un audio de gallina al grupo
Haz un baile de los 80s 30 seg
Imita a tu primo contando un chiste
Haz 15 sentadillas con aplausos
Canta el abecedario al revÃ©s
Baila con una silla como pareja 20 seg
EnvÃ­a un selfie con lengua al chat
Imita a tu tÃ­a chismeando
Haz 10 planchas cantando
Llama a un familiar y di â€œeres el mejorâ€
Haz un rap familiar improvisado
Baila breakdance (o intento) 15 seg
Imita a tu madre cocinando paella
Haz 20 saltos con una pierna sola
EnvÃ­a un audio de leÃ³n al grupo
Canta â€œLas maÃ±anitasâ€ a todo volumen
Imita a tu abuelo leyendo el periÃ³dico
Haz un castillo de cojines Ã©pico
Baila con un sombrero invisible 20 seg
Llama a tu primo y hazle un cumplido
Haz 15 flexiones con palmadas
Imita a tu tÃ­a bailando flamenco
EnvÃ­a un vÃ­deo bailando al grupo
Haz un pino puente 10 seg
Canta una Ã³pera familiar inventada
Baila el moonwalk 15 seg
Imita a tu perro pidiendo comida
Haz 10 burpees con gritos
EnvÃ­a un audio de vaca al grupo
Canta el himno de tu equipo favorito
Imita a tu madre regaÃ±ando por WhatsApp
Haz 20 abdominales cantando una nana
Baila con una escoba como pareja de baile
Llama a tu abuela y dile que la quieres
Haz un rap de los nombres familiares
Imita a tu tÃ­o contando anÃ©cdotas
EnvÃ­a un sticker de beso al chat
Haz 15 sentadillas con saltos
Canta â€œLa cucarachaâ€ con mariachi
Baila el twist 20 seg
Imita a tu primo haciendo muecas
Haz 10 planchas con palmadas
EnvÃ­a un audio de loro al grupo
Canta â€œFeliz Navidadâ€ en julio
Imita a tu tÃ­a maquillÃ¡ndose
Haz un castillo de arena imaginario
Baila con un cojÃ­n como pareja 20 seg
Llama a un familiar y hazle reÃ­r
Haz 20 saltos de estrella
Imita a tu abuelo durmiendo la siesta
EnvÃ­a un vÃ­deo de baile loco al grupo
Haz un pino intento Ã©pico
Canta una canciÃ³n infantil en inglÃ©s
Baila el hula-hoop imaginario 15 seg
Imita a tu madre llamando a comer
Haz 15 burpees cantando
EnvÃ­a un audio de elefante al grupo
Canta â€œCumpleaÃ±os felizâ€ a ti mismo
Imita a tu primo contando chistes malos
Haz 10 flexiones con una mano
Baila con una escoba como guitarra
Llama a tu tÃ­a y dile un piropo`.trim().split('\n');

    const actionDisplay = document.getElementById('action-display');
    const categorySelect = document.getElementById('category');
    const currentPlayerDisplay = document.getElementById('current-player-display');
    const playerListTags = document.getElementById('player-list-tags');
    const nextPlayerBtn = document.getElementById('next-player-btn');
    const errorMessage = document.getElementById('error-message');
    const startScreen = document.getElementById('start-screen');
    const preferenceScreen = document.getElementById('preference-screen');
    const gameScreen = document.getElementById('game-screen');
    const currentPreferencePlayer = document.getElementById('current-preference-player');

    let usedTruths = {friends:[], family:[]};
    let usedDares = {friends:[], family:[]};

    // === MODO GLOBAL ===
    document.querySelectorAll('input[name="global-gender-mode"]').forEach(radio => {
        radio.addEventListener('change', function() {
            document.getElementById('both-mode').classList.add('hidden');
            document.getElementById('girls-mode').classList.add('hidden');
            document.getElementById('boys-mode').classList.add('hidden');
            document.getElementById(`${this.value}-mode`).classList.remove('hidden');
        });
    });

    function startGame(){
        const mode = document.querySelector('input[name="global-gender-mode"]:checked').value;
        let girls = [], boys = [];

        if(mode === 'both'){
            girls = document.getElementById('girls-input').value.split(',').map(n=>n.trim()).filter(n=>n).map(n=>({name:n,gender:'girl', preference:'both'}));
            boys = document.getElementById('boys-input').value.split(',').map(n=>n.trim()).filter(n=>n).map(n=>({name:n,gender:'boy', preference:'both'}));
        } else if(mode === 'girls'){
            girls = document.getElementById('girls-only-input').value.split(',').map(n=>n.trim()).filter(n=>n).map(n=>({name:n,gender:'girl', preference:'girls'}));
        } else if(mode === 'boys'){
            boys = document.getElementById('boys-only-input').value.split(',').map(n=>n.trim()).filter(n=>n).map(n=>({name:n,gender:'boy', preference:'boys'}));
        }

        players = [...girls, ...boys];
        if(players.length < 2){
            errorMessage.classList.remove('hidden');
            return;
        }
        errorMessage.classList.add('hidden');
        startScreen.classList.add('hidden');

        if(mode === 'both'){
            currentPreferenceIndex = 0;
            showPreferenceScreen();
        } else {
            startGameplay();
        }
    }

    function showPreferenceScreen(){
        if(currentPreferenceIndex >= players.length){
            startGameplay();
            return;
        }
        const player = players[currentPreferenceIndex];
        currentPreferencePlayer.textContent = player.name;
        preferenceScreen.classList.remove('hidden');
    }

    function savePreferenceAndNext(){
        const selected = document.querySelector('input[name="player-preference"]:checked').value;
        players[currentPreferenceIndex].preference = selected;
        currentPreferenceIndex++;
        preferenceScreen.classList.add('hidden');
        showPreferenceScreen();
    }

    function startGameplay(){
        renderPlayers();
        gameScreen.classList.remove('hidden');
        nextPlayer();
    }

    function renderPlayers(){
        playerListTags.innerHTML = players.map((p,i)=>`<span class="player-tag ${p.gender==='girl'?'tag-girl':'tag-boy'}" data-index="${i}">${p.name}</span>`).join('');
    }

    function nextPlayer(){
        if(isSpinning) return;
        isSpinning=true; nextPlayerBtn.disabled=true; nextPlayerBtn.textContent='Girando...';
        let spins=0;
        const int=setInterval(()=>{
            currentPlayerDisplay.textContent=players[Math.floor(Math.random()*players.length)].name;
            spins++;
            if(spins>20){clearInterval(int);revealPlayer();}
        },70);
    }

    function revealPlayer(){
        currentPlayerIndex=Math.floor(Math.random()*players.length);
        const p=players[currentPlayerIndex];
        currentPlayerDisplay.textContent=p.name;
        document.querySelectorAll('.player-tag').forEach((t,i)=>{
            t.classList.remove('current-player');
            if(i===currentPlayerIndex) t.classList.add('current-player');
        });
        actionDisplay.innerHTML=`<div class="action-title neon-truth">Â¡Turno de <span class="player-name">${p.name}</span>!</div><div>Elige Verdad o Reto.</div>`;
        actionDisplay.classList.remove('animate-in','neon-truth','neon-dare');
        isSpinning=false; nextPlayerBtn.disabled=false; nextPlayerBtn.textContent='Girar Ruleta';
    }

    function selectTargetPlayer(){
        if(players.length<=1) return {name:"alguien", gender:"unknown"};

        const currentPref = players[currentPlayerIndex].preference;
        let candidates = [];

        if(currentPref === 'both'){
            candidates = players.filter((_,i)=>i!==currentPlayerIndex);
        } else {
            candidates = players.filter(p => p.gender === currentPref && p.name !== players[currentPlayerIndex].name);
        }

        if(candidates.length === 0){
            candidates = players.filter((_,i)=>i!==currentPlayerIndex);
        }

        const target = candidates[Math.floor(Math.random()*candidates.length)];
        return target;
    }

    function askAction(type){
        actionDisplay.classList.remove('animate-in','neon-truth','neon-dare');
        if(currentPlayerIndex===-1){
            actionDisplay.innerHTML='<div class="action-title neon-truth">Â¡Gira la ruleta primero!</div>';
            return;
        }
        const cat=categorySelect.value;

        if(cat !== 'friends'){
            const data=gameData[cat][type];
            let used=type==='truth'?usedTruths[cat]:usedDares[cat];
            if(used.length===data.length){used.length=0;}
            const avail=data.filter((_,i)=>!used.includes(i));
            const pick=avail[Math.floor(Math.random()*avail.length)];
            const idx=data.indexOf(pick);
            used.push(idx);
            let txt = pick.replace(/\[PLAYER_NAME\]/g, `<span class="player-name">${players[currentPlayerIndex].name}</span>`);
            const neon=type==='truth'?'neon-truth':'neon-dare';
            const title=type==='truth'?'VERDAD':'RETO';
            actionDisplay.innerHTML = `<div class="action-title ${neon}">${title} (FAMILIA)</div><div>${txt}</div>`;
            actionDisplay.classList.add('animate-in',neon);
            return;
        }

        const data=gameData[cat][type];
        let used=type==='truth'?usedTruths[cat]:usedDares[cat];
        if(used.length===data.length){
            used.length=0;
            actionDisplay.innerHTML=`<div class="action-title ${type==='truth'?'neon-truth':'neon-dare'}">Â¡Todas las <b>${type==='truth'?'verdades':'retos'}</b> usadas!</div><div>Reiniciandoâ€¦</div>`;
            actionDisplay.classList.add('animate-in',type==='truth'?'neon-truth':'neon-dare');
            setTimeout(()=>askAction(type),2000);
            return;
        }

        let attempts = 0;
        let pick, idx, target, txt;
        do {
            const avail=data.filter((_,i)=>!used.includes(i));
            if(avail.length===0) break;
            pick=avail[Math.floor(Math.random()*avail.length)];
            idx=data.indexOf(pick);
            target = selectTargetPlayer();
            txt = pick
                .replace(/\[PLAYER\]/g, `<span class="player-name">${players[currentPlayerIndex].name}</span>`)
                .replace(/\[TARGET\]/g, `<span class="target-name">${target.name}</span>`);
            attempts++;
        } while (attempts < 50 && !isValidTargetForAction(type, target.gender));

        if(attempts >= 50){
            target = selectTargetPlayer();
            txt = pick
                .replace(/\[PLAYER\]/g, `<span class="player-name">${players[currentPlayerIndex].name}</span>`)
                .replace(/\[TARGET\]/g, `<span class="target-name">${target.name}</span>`);
        }

        used.push(idx);
        const neon=type==='truth'?'neon-truth':'neon-dare';
        const title=type==='truth'?'VERDAD':'RETO';
        actionDisplay.innerHTML = `<div class="action-title ${neon}">${title} (COLEGIO)</div><div>${txt}</div>`;
        actionDisplay.classList.add('animate-in',neon);
    }

    function isValidTargetForAction(type, targetGender){
        const currentPref = players[currentPlayerIndex].preference;
        if(currentPref === 'both') return true;
        return targetGender === currentPref;
    }

    document.head.insertAdjacentHTML('beforeend','<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">');
</script>
</body>
</html>
